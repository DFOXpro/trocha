/*! Trocha.js - v0.1.1 - 2018-06-17 */this.trocha=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba;return W="/",aa="",a="$",H="OPTIONS",w="GET",x="HEAD",L="POST",O="PUT",J="PATCH",t="DELETE",T="TRACE",q="CONNECT",Q="ROUTE",S="SCOPE",P="RESOURCE",z="id",C="name",y="hide",V="url",U="type",N="pre",m="alias",M="post",v="ext",B="method",u="domain",R="routes",A="justId",l="afterId",I="parentId",o="alwaysUrl",n="alwaysPost",s="customSelector",p=a+"as",b=a+z,K="path",d=a+C,c=a+B,r="_custom",G="_newScope",F="_newRoute",E="_newResource",D="_newAlias",h=a+u,j=a+N,i=a+M,f=a+o,e=a+n,k=a+P.toLowerCase(),g=a+s,_="show",Y="edit",$="new",Z="list",X={},X[a+z]=z,X[_]={},X[Y]={},X[$]={},X[Z]={},X[_][a+y]=!0,X[$][a+z]=!1,X[Z][a+z]=!1,X[Z][a+y]=!0,ba=function(l){var q,t,x,H,J,L,O,T,Y,Z;return l||(l={}),Z={},t=function(a){return Z=q(),a[u]&&(Z[h]=aa+a[u]),a[N]&&(Z[j]=aa+a[N]),a[M]&&(Z[i]=aa+a[M]),a[P.toLowerCase()]&&(Z[k]=a[P.toLowerCase()]),a[s]&&(Z[g]=a[s]),a[o]&&(Z[f]=a[o]),a[n]&&(Z[e]=a[n]),Z[r]=function(a,b){return x({},a)(b)},a[R]&&H(Z,a[R]),Z},q=function(a,e,f){var g,h;return f||(f={}),h={},f[Q]&&(h=f[Q]),g=[G,F,D,E],"object"==typeof h&&[Y,T,L,O].forEach(function(a,b){return Object.defineProperty(h,g[b],{get:function(){return a}})}),a&&e&&(h[K]=x(a,e),h[d]=e[C],h[p]=J(a,e),f[B]&&(h[c]=e[B]||w),f[z]&&e[z]&&(h[b]=e[z]),a[e[C]]=h),h},H=function(b,c,d){var e,f;return e=d||Z[g]||a,delete c[e+U],f=Object.keys(c),f.forEach(function(a){var d,f,g,h;if(h=c[a],"string"==typeof h)return f={},f[C]=a,f[m]=h,b[D](f);if("object"==typeof h)return d=function(c,d){var f;return delete c[e+U],d=d||{},d[C]=a,void 0!==c[e+z]&&(d[z]=c[e+z],delete c[e+z]),c[e+I]===!1&&(d[I]=!1,delete c[e+I]),f=Object.keys(c),f.forEach(function(a){return c[a]===!1&&b.path&&b.path().includes("/:"+a)?(d[a]=!1,delete c[a]):void(c[a]===!1)}),d},h[e+U]===S?b[G](d(h)):h[e+U]===P?b[E](d(h)):(g={},h[e+y]&&(g[y]=h[e+y],delete h[e+y]),h[e+y]===!1&&delete h[e+y],h[e+B]&&(g[B]=h[e+B],delete h[e+B]),h[e+A]&&(g[A]=h[e+A],delete h[e+A]),b[F](d(h,g))),H(b[a],h);throw"TrochaJS error: [_prepareRoutes] invalid route definition. "+C+" = "+a+" in "+b[C]})},x=function(a,c){return function(d){var g,k,l,n,o;return d||(d={}),c[m]?c[m]:(o=Z[h]&&!a[K]&&(d[V]||Z[f])?Z[h]:aa,delete d[V],o+=(d[N]||d[v])&&Z[j]?Z[j]:aa,delete d[N],o+=a[K]?a[K]({post:!1}):aa,k=void 0!==d[y]?d[y]:c[y],d[A]!==!1&&c[A]&&c[z]?o+=W+":"+c[z]:(l=!c[z]||d[z]===!1,o+=k?aa:W+c[C],o+=l?aa:W+":"+c[z]),o+=Z[i]&&0!=d[M]&&!k&&(Z[e]||c[M]||d[M]||d[v])?Z[i]:aa,delete d[M],n={},d.query&&(n=JSON.parse(JSON.stringify(d.query)),delete d.query),d.fragment&&(g=d.fragment,delete d.fragment),!a[b]||d[a[b]]||c[z]!==!1&&d[I]!==!1&&c[I]!==!1||(o=o.replace("/:"+a[b],aa)),Object.keys(c).forEach(function(a){if(c[a]===!1&&!d[a])return o=o.replace("/:"+a,aa)}),Object.keys(d).forEach(function(a){return o=d[a]===!1?o.replace("/:"+a,aa):o.replace(":"+a,d[a])}),Object.keys(n).forEach(function(a,b,c){return 0===b&&(o+="?"),o+=encodeURIComponent(a)+"="+encodeURIComponent(n[a])+(c.length-1!==b?"&":"")}),g&&(o+="#"+encodeURIComponent(g)),o)}},J=function(a,b){var c;return c=a[p],(c?c+"_":"")+b[C]},Y=function(a){var b;if(a){if(a[C]){if("string"!=typeof a[C])throw"Trocha.newScope: require String name";return b=this,q(b,a),delete b[a[C]][G]}throw"Trocha.newScope: Missing name"}},L=function(a){var b,c;if(a){if(a[C]){if("string"!=typeof a[C])throw"Trocha.newAlias: require String "+C;if(a[m]){if("string"!=typeof a[m])throw"Trocha.newAlias: require String "+m;return c=this,b={},b[Q]=a[m],q(c,a,b)}throw"Trocha.newAlias: Missing "+m}throw"Trocha.newAlias: Missing "+C}},T=function(a){var b,c;if(a){if(a[C]){if("string"!=typeof a[C])throw"Trocha.newRoute: require String "+C;if(a[m]){if("string"!=typeof a[m])throw"Trocha.newRoute: require String "+m;return L(a)}return c=this,b={},b[B]=!0,b[z]=!0,q(c,a,b)}throw"Trocha.newRoute: Missing "+C}},O=function(b){var c,d;if(b){if("object"!=typeof b)throw"Trocha.newResource: require Object input";return c={},b[P.toLowerCase()]||Z[k]?(c[b[C]]=JSON.parse(JSON.stringify(b[P.toLowerCase()]||Z[k])),d=Z[g]||a):(c[b[C]]=JSON.parse(JSON.stringify(X)),d=a),c[b[C]][a+z]=b[z],H(this,c,d)}},t(l)},[H,w,x,L,O,J,t,T,q,P,Q,S].forEach(function(a){return Object.defineProperty(ba,a,{get:function(){return a}})}),Object.defineProperty(ba,a+P,{get:function(){return X}}),ba}();