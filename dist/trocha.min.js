/*! Trocha.js - v0.1.1 - 2017-01-14 */this.trocha=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba;return W="/",aa="",a="$",H="OPTIONS",w="GET",x="HEAD",L="POST",O="PUT",J="PATCH",t="DELETE",T="TRACE",q="CONNECT",Q="ROUTE",S="SCOPE",P="RESOURCE",z="id",C="name",y="hide",V="url",U="type",N="pre",m="alias",M="post",v="ext",B="method",u="domain",R="routes",A="justId",l="afterId",I="parentId",o="alwaysUrl",n="alwaysPost",s="customSelector",p=a+"as",b=a+z,K="path",d=a+C,c=a+B,r="_custom",G="_newScope",F="_newRoute",E="_newResource",D="_newAlias",h=a+u,j=a+N,i=a+M,f=a+o,e=a+n,k=a+P.toLowerCase(),g=a+s,_="show",Y="edit",$="new",Z="list",X={},X[a+z]=z,X[_]={},X[Y]={},X[$]={},X[Z]={},X[_][a+y]=!0,X[$][a+z]=!1,X[Z][a+z]=!1,X[Z][a+y]=!0,ba=function(q){var t,x,H,J,L,O,Q,T,Y,Z;return q||(q={}),Z={},x=function(a){return Z=t(),a[u]&&(Z[h]=aa+a[u]),a[N]&&(Z[j]=aa+a[N]),a[M]&&(Z[i]=aa+a[M]),a[P.toLowerCase()]&&(Z[k]=a[P.toLowerCase()]),a[s]&&(Z[g]=a[s]),a[o]&&(Z[f]=a[o]),a[n]&&(Z[e]=a[n]),Z[r]=function(a,b){return H({},a)(b)},a[R]&&J(Z,a[R]),Z},t=function(){var a;return a={},a[G]=Y,a[F]=T,a[D]=O,a[E]=Q,a},J=function(b,c,d){var e,f;return e=d||Z[g]||a,delete c[e+U],f=Object.keys(c),f.forEach(function(a){var d,f,g,h;if(h=c[a],"string"==typeof h)return b[a]=h;if("object"==typeof h)return h[e+U]===S?(g={},g[C]=a,void 0!==h[e+z]&&(g[z]=h[e+z],delete h[e+z]),b[G](g)):h[e+U]===P?(d={},d[C]=a,void 0!==h[e+z]&&(d[z]=h[e+z],delete h[e+z]),b[E](d)):(f={},f[C]=a,void 0!==h[e+z]&&(f[z]=h[e+z],delete h[e+z]),h[e+B]&&(f[B]=h[e+B],delete h[e+B]),h[e+A]&&(f[A]=h[e+A],delete h[e+A]),h[e+l]&&(f[l]=h[e+l],delete h[e+l]),h[e+y]&&(f[y]=h[e+y],delete h[e+y]),h[e+M]&&(f[M]=h[e+M],delete h[e+M]),b[F](f)),J(b[a],h);throw"TrochaJS error: [_prepareRoutes] invalid route definition. "+C+" = "+a+" in "+b[C]})},H=function(a,c){return function(d){var g,k,l,n,o;return d||(d={}),c[m]?c[m]:(o=Z[h]&&!a[K]&&(d[V]||Z[f])?Z[h]:aa,delete d[V],o+=(d[N]||d[v])&&Z[j]?Z[j]:aa,delete d[N],o+=a[K]?a[K]({post:!1}):aa,k=void 0!==d[y]?d[y]:c[y],(a[b]&&c[z]===!1&&!d[z]||d[I]===!1)&&(o=o.replace("/:"+a[b],aa)),d[A]!==!1&&c[A]&&c[z]?o+=W+":"+c[z]:(l=!c[z]||d[z]===!1,o+=k?aa:W+c[C],o+=l?aa:W+":"+c[z]),o+=Z[i]&&0!=d[M]&&!k&&(Z[e]||c[M]||d[M]||d[v])?Z[i]:aa,delete d[M],n={},d.query&&(n=JSON.parse(JSON.stringify(d.query)),delete d.query),d.fragment&&(g=d.fragment,delete d.fragment),Object.keys(d).forEach(function(a){return o=d[a]===!1?o.replace("/:"+a,aa):o.replace(":"+a,d[a])}),Object.keys(n).forEach(function(a,b,c){return 0===b&&(o+="?"),o+=encodeURIComponent(a)+"="+encodeURIComponent(n[a])+(c.length-1!==b?"&":"")}),g&&(o+="#"+encodeURIComponent(g)),o)}},L=function(a,b){var c;return c=a[p],(c?c+"_":"")+b[C]},Y=function(a){var b,c;if(a){if(a[C]){if("string"!=typeof a[C])throw"Trocha.newScope: require String name";return b=this,c=t(),delete c[G],c[d]=a[C],c[K]=H(b,a),c[p]=L(b,a),b[c[d]]=c}throw"Trocha.newScope: Missing name"}},O=function(a){if(a){if(!a[C])throw"Trocha.newAlias: Missing "+C;if("string"!=typeof a[C])throw"Trocha.newAlias: require String "+C;if(a[m]){if("string"!=typeof a[m])throw"Trocha.newAlias: require String "+m;return parent[a[C]]=a[m]}}},T=function(a){var e,f;if(e=this,a){if(a[C]){if("string"!=typeof a[C])throw"Trocha.newRoute: require String "+C;if(a[m]){if("string"!=typeof a[m])throw"Trocha.newRoute: require String "+m;return O(a)}return f=t(),f[c]=a[B]||w,f[d]=a[C],f[K]=H(e,a),f[p]=L(e,a),a[z]&&(f[b]=a[z]),e[f[d]]=f}throw"Trocha.newRoute: Missing "+C}},Q=function(b){var c,d;if(b){if("object"!=typeof b)throw"Trocha.newResource: require Object input";return c={},b[P.toLowerCase()]||Z[k]?(c[b[C]]=JSON.parse(JSON.stringify(b[P.toLowerCase()]||Z[k])),d=Z[g]||a):(c[b[C]]=JSON.parse(JSON.stringify(X)),d=a),c[b[C]][a+z]=b[z],J(this,c,d)}},x(q)},ba.OPTIONS=H,ba.GET=w,ba.HEAD=x,ba.POST=L,ba.PUT=O,ba.PATCH=J,ba.DELETE=t,ba.TRACE=T,ba.CONNECT=q,ba[P]=P,ba[Q]=Q,ba[S]=S,ba[a+P]=JSON.parse(JSON.stringify(X)),ba}();