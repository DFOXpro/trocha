/*! Trocha.js - v0.1.1 - 2017-01-15 */this.trocha=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba;return W="/",aa="",a="$",H="OPTIONS",w="GET",x="HEAD",L="POST",O="PUT",J="PATCH",t="DELETE",T="TRACE",q="CONNECT",Q="ROUTE",S="SCOPE",P="RESOURCE",z="id",C="name",y="hide",V="url",U="type",N="pre",m="alias",M="post",v="ext",B="method",u="domain",R="routes",A="justId",l="afterId",I="parentId",o="alwaysUrl",n="alwaysPost",s="customSelector",p=a+"as",b=a+z,K="path",d=a+C,c=a+B,r="_custom",G="_newScope",F="_newRoute",E="_newResource",D="_newAlias",h=a+u,j=a+N,i=a+M,f=a+o,e=a+n,k=a+P.toLowerCase(),g=a+s,_="show",Y="edit",$="new",Z="list",X={},X[a+z]=z,X[_]={},X[Y]={},X[$]={},X[Z]={},X[_][a+y]=!0,X[$][a+z]=!1,X[Z][a+z]=!1,X[Z][a+y]=!0,ba=function(q){var t,x,H,J,L,O,T,Y,Z,$;return q||(q={}),$={},x=function(a){return $=t(),a[u]&&($[h]=aa+a[u]),a[N]&&($[j]=aa+a[N]),a[M]&&($[i]=aa+a[M]),a[P.toLowerCase()]&&($[k]=a[P.toLowerCase()]),a[s]&&($[g]=a[s]),a[o]&&($[f]=a[o]),a[n]&&($[e]=a[n]),$[r]=function(a,b){return H({},a)(b)},a[R]&&J($,a[R]),$},t=function(a,e,f){var g,h;return f||(f={}),h={},f[Q]&&(h=f[Q]),g=[G,F,D,E],"object"==typeof h&&[Z,Y,O,T].forEach(function(a,b){return Object.defineProperty(h,g[b],{get:function(){return a}})}),a&&e&&(h[K]=H(a,e),h[d]=e[C],h[p]=L(a,e),f[B]&&(h[c]=e[B]||w),f[z]&&e[z]&&(h[b]=e[z]),a[e[C]]=h),h},J=function(b,c,d){var e,f;return e=d||$[g]||a,delete c[e+U],f=Object.keys(c),f.forEach(function(a){var d,f,g,h,i;if(i=c[a],"string"==typeof i)return d={},d[C]=a,d[m]=i,b[D](d);if("object"==typeof i)return i[e+U]===S?(h={},h[C]=a,void 0!==i[e+z]&&(h[z]=i[e+z],delete i[e+z]),b[G](h)):i[e+U]===P?(f={},f[C]=a,void 0!==i[e+z]&&(f[z]=i[e+z],delete i[e+z]),b[E](f)):(g={},g[C]=a,void 0!==i[e+z]&&(g[z]=i[e+z],delete i[e+z]),i[e+B]&&(g[B]=i[e+B],delete i[e+B]),i[e+A]&&(g[A]=i[e+A],delete i[e+A]),i[e+l]&&(g[l]=i[e+l],delete i[e+l]),i[e+y]&&(g[y]=i[e+y],delete i[e+y]),i[e+M]&&(g[M]=i[e+M],delete i[e+M]),b[F](g)),J(b[a],i);throw"TrochaJS error: [_prepareRoutes] invalid route definition. "+C+" = "+a+" in "+b[C]})},H=function(a,c){return function(d){var g,k,l,n,o;return d||(d={}),c[m]?c[m]:(o=$[h]&&!a[K]&&(d[V]||$[f])?$[h]:aa,delete d[V],o+=(d[N]||d[v])&&$[j]?$[j]:aa,delete d[N],o+=a[K]?a[K]({post:!1}):aa,k=void 0!==d[y]?d[y]:c[y],(a[b]&&c[z]===!1&&!d[z]||d[I]===!1)&&(o=o.replace("/:"+a[b],aa)),d[A]!==!1&&c[A]&&c[z]?o+=W+":"+c[z]:(l=!c[z]||d[z]===!1,o+=k?aa:W+c[C],o+=l?aa:W+":"+c[z]),o+=$[i]&&0!=d[M]&&!k&&($[e]||c[M]||d[M]||d[v])?$[i]:aa,delete d[M],n={},d.query&&(n=JSON.parse(JSON.stringify(d.query)),delete d.query),d.fragment&&(g=d.fragment,delete d.fragment),Object.keys(d).forEach(function(a){return o=d[a]===!1?o.replace("/:"+a,aa):o.replace(":"+a,d[a])}),Object.keys(n).forEach(function(a,b,c){return 0===b&&(o+="?"),o+=encodeURIComponent(a)+"="+encodeURIComponent(n[a])+(c.length-1!==b?"&":"")}),g&&(o+="#"+encodeURIComponent(g)),o)}},L=function(a,b){var c;return c=a[p],(c?c+"_":"")+b[C]},Z=function(a){var b;if(a){if(a[C]){if("string"!=typeof a[C])throw"Trocha.newScope: require String name";return b=this,t(b,a),delete b[a[C]][G]}throw"Trocha.newScope: Missing name"}},O=function(a){var b,c;if(a){if(a[C]){if("string"!=typeof a[C])throw"Trocha.newAlias: require String "+C;if(a[m]){if("string"!=typeof a[m])throw"Trocha.newAlias: require String "+m;return c=this,b={},b[Q]=a[m],t(c,a,b)}throw"Trocha.newAlias: Missing "+m}throw"Trocha.newAlias: Missing "+C}},Y=function(a){var b,c;if(a){if(a[C]){if("string"!=typeof a[C])throw"Trocha.newRoute: require String "+C;if(a[m]){if("string"!=typeof a[m])throw"Trocha.newRoute: require String "+m;return O(a)}return c=this,b={},b[B]=!0,b[z]=!0,t(c,a,b)}throw"Trocha.newRoute: Missing "+C}},T=function(b){var c,d;if(b){if("object"!=typeof b)throw"Trocha.newResource: require Object input";return c={},b[P.toLowerCase()]||$[k]?(c[b[C]]=JSON.parse(JSON.stringify(b[P.toLowerCase()]||$[k])),d=$[g]||a):(c[b[C]]=JSON.parse(JSON.stringify(X)),d=a),c[b[C]][a+z]=b[z],J(this,c,d)}},x(q)},[H,w,x,L,O,J,t,T,q,P,Q,S].forEach(function(a){return Object.defineProperty(ba,a,{get:function(){return a}})}),Object.defineProperty(ba,a+P,{get:function(){return X}}),ba}();