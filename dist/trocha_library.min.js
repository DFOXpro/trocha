/** @license TrochaJS@0.2.0 - 2019-03-16
* Trocha.js 
* 
* This source code is licensed under the Mozillas Public license 2.0 found in the 
* LICENSE file in the root directory of this source tree. 
*/
function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function _get(a,b,c){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,b,c){var d=_superPropBase(a,b);if(d){var e=Object.getOwnPropertyDescriptor(d,b);return e.get?e.get.call(c):e.value}})(a,b,c||a)}function _superPropBase(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=_getPrototypeOf(a),null!==a););return a}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperties(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classPrivateFieldGet(a,b){if(!b.has(a))throw new TypeError("attempted to get private field on non-instance");var c=b.get(a);return c.get?c.get.call(a):c.value}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){return!b||"object"!==_typeof(b)&&"function"!=typeof b?_assertThisInitialized(a):b}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _wrapNativeSuper(a){var b="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(a){function c(){return _construct(a,arguments,_getPrototypeOf(this).constructor)}if(null===a||!_isNativeFunction(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(c,a)})(a)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function _construct(a,b,c){return _construct=isNativeReflectConstruct()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);var e=Function.bind.apply(a,d),f=new e;return c&&_setPrototypeOf(f,c.prototype),f},_construct.apply(null,arguments)}function _isNativeFunction(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function _setPrototypeOf(a,b){return(_setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function _getPrototypeOf(a){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}!function(a){var b=function(a,b,c){var d=function(a){function b(a,c,d){var e;return _classCallCheck(this,b),e=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,S+c)),e.scope=a,e.value=d,e}return _inherits(b,a),b}(_wrapNativeSuper(Error));throw new d(a,b,c)},c=function(a,b,c){},d="/",e="",f="$",g="OPTIONS",h="GET",i="HEAD",j="POST",k="PUT",l="PATCH",m="DELETE",n="TRACE",o="CONNECT",p="ROUTE",q="SCOPE",r="RESOURCE",s="ALIAS",t="id",u="resource",v="name",w="hide",x="url",y="type",z="pre",A="alias",B="query",C="fragment",D="post",E="ext",F="method",G="domain",H="justId",I="parentId",J="alwaysUrl",K="alwaysPost",L="as",M="path",N="show",O="edit",P="new",Q="list",R=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,b={};return b[a+t]=t,b[N]={},b[O]={},b[P]={},b[Q]={},b[N][a+w]=!0,b[P][a+t]=!1,b[Q][a+t]=!1,b[Q][a+w]=!0,b},S="TrochaJS error: ",T="route already declare",U="Resource should not be used as a route",V=function(){function a(c,d,e,g){var i=this,j=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},k=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,m=arguments.length>7?arguments[7]:void 0,n=arguments.length>8?arguments[8]:void 0,o=arguments.length>9?arguments[9]:void 0;_classCallCheck(this,a),W.set(this,{writable:!0,value:{parent:null,childs:{},SS:f,alwaysPost:!1,alwaysUrl:!1,domain:"",post:"",pre:""}}),X.set(this,{writable:!0,value:function(a,b){var c=_classPrivateFieldGet(a,W).SS;return!!_classPrivateFieldGet(a,W).parent&&(_classPrivateFieldGet(a,W).parent[c+t]===b||_classPrivateFieldGet(a,X).call(a,_classPrivateFieldGet(a,W).parent,b))}}),Y.set(this,{writable:!0,value:function(a,b,c,d){var e=d?"":_classPrivateFieldGet(a,W).SS;Object.defineProperty(a,e+b,{get:function(){return c?c():_classPrivateFieldGet(a,W)[b]},enumerable:!0,configurable:!1})}}),Z.set(this,{writable:!0,value:function(a,b){var c=_classPrivateFieldGet(a,W).SS,d=function(d){_classPrivateFieldGet(a,W)[d]=b[c+d],delete b[c+d]};d(v),d(t),d(y),d(F),d(A),d(u),d(w),d(H),d(I),!1===b[_classPrivateFieldGet(a,W).parent[c+t]]&&d(_classPrivateFieldGet(a,W).parent[c+t]),_classPrivateFieldGet(a,Y).call(a,a,v),_classPrivateFieldGet(a,Y).call(a,a,t),_classPrivateFieldGet(a,Y).call(a,a,F),_classPrivateFieldGet(a,Y).call(a,a,L,function(){return _classPrivateFieldGet(a,aa).call(a,a)})}}),$.set(this,{writable:!0,value:function(c,d,e){var f=_classPrivateFieldGet(c,W).SS;_classPrivateFieldGet(c,W).childs[e]&&b(c,T,e),ba.isAlias(d,f)&&(d=ba.diggestAlias(d,f,f)),ca.isResource(d,f)&&(d=ca.diggestResource(d,f,f)),d[f+v]=e;var g={};g[p]=a,g[void 0]=a,g[s]=ba,g[q]=a,g[r]=ca;var h=new g[d[f+y]](c,d,f,_classPrivateFieldGet(c,W).root);_classPrivateFieldGet(c,W).childs[e]=h,_classPrivateFieldGet(c,Y).call(c,c,e,function(){return _classPrivateFieldGet(c,W).childs[e]},!0)}}),_.set(this,{writable:!0,value:function(a,b,c){if(!c&&_classPrivateFieldGet(a,W)[y]===r){var d=_classPrivateFieldGet(a,W).SS,e=_classPrivateFieldGet(a,W)[u];delete e[d+t],_classPrivateFieldGet(a,_).call(a,a,e,!0)}for(var f=Object.keys(b);f.length;){var g=f.pop();b[g]===!1&&_classPrivateFieldGet(a,X).call(a,a,g)?_classPrivateFieldGet(a,W)[g]=!1:_classPrivateFieldGet(a,$).call(a,a,b[g],g)}}}),aa.set(this,{writable:!0,value:function(a){var b=_classPrivateFieldGet(a,W).SS;return _classPrivateFieldGet(a,W).parent[b+L]?"".concat(_classPrivateFieldGet(a,W).parent[b+L],"_").concat(_classPrivateFieldGet(a,W)[v]):_classPrivateFieldGet(a,W)[v]}}),_defineProperty(this,"_newRoute",function(a){var b=_classPrivateFieldGet(i,W).SS,c={};c[b+y]=p,c[b+F]=a[F],c[b+t]=a[t],c[b+w]=a[w],c[b+H]=a[H],_classPrivateFieldGet(i,$).call(i,i,c,a[v])}),_defineProperty(this,"_newScope",function(a){var b=_classPrivateFieldGet(i,W).SS,c={};c[b+y]=q,c[b+t]=a[t],_classPrivateFieldGet(i,$).call(i,i,c,a[v])}),_defineProperty(this,"_newAlias",function(a){var b=_classPrivateFieldGet(i,W).SS;return a[y]=s,!!ba.isAlias(a,"")&&void _classPrivateFieldGet(i,$).call(i,i,ba.diggestAlias(a,b,""),a[v])}),_defineProperty(this,"_newResource",function(a){var b=_classPrivateFieldGet(i,W).SS;return a[y]=r,!!ca.isResource(a,"")&&void _classPrivateFieldGet(i,$).call(i,i,ca.diggestResource(a,b,""),a[v])}),_defineProperty(this,"toString",function(){return _classPrivateFieldGet(i,aa).call(i,i)});var x=_classPrivateFieldGet(this,W).SS=e||f,B={};B[x+F]=h,B[x+y]=p;var C=_objectSpread({},B,d);c||C[x+v]&&C[x+F]&&C[x+y]?(_classPrivateFieldGet(this,W).parent=c,_classPrivateFieldGet(this,W).root=g,_classPrivateFieldGet(this,Z).call(this,this,C),_classPrivateFieldGet(this,_).call(this,this,C)):(_classPrivateFieldGet(this,W)[G]=k||_classPrivateFieldGet(this,W)[G],_classPrivateFieldGet(this,Y).call(this,this,G),_classPrivateFieldGet(this,W)[J]=l||_classPrivateFieldGet(this,W)[J],_classPrivateFieldGet(this,W)[K]=o||_classPrivateFieldGet(this,W)[K],_classPrivateFieldGet(this,W)[D]=n||_classPrivateFieldGet(this,W)[D],_classPrivateFieldGet(this,W)[z]=m||_classPrivateFieldGet(this,W)[z],_classPrivateFieldGet(this,W).root=_classPrivateFieldGet(this,W),delete this[M],_classPrivateFieldGet(this,Y).call(this,this,r,function(){return R(x)}),_classPrivateFieldGet(this,_).call(this,this,j))}return _createClass(a,[{key:"path",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1?arguments[1]:void 0,c=_classPrivateFieldGet(this,W),f=c.parent||{},g=c.root,h=c.SS,i=e;if(void 0===c[v])return"";i=g[G]&&a[x]!==!1&&(a[x]||g[J])?g[G]:e,delete a[x],i+=g[z]&&(a[z]||a[E])?g[z]:e,delete a[z];var j={};j[D]=!1,i+=f[M]?f[M](j,function(){return!0}):e;var k,l=void 0!==a[w]?a[w]:c[w];if("function"==typeof b&&(k=b(c)),"string"==typeof k)i+=k;else{var m=":"+c[t];if(a[H]!==!1&&c[H]&&c[t])i+=d+m;else{var n=!c[t]||a[t]===!1;i+=l?e:d+c[v],i+=n?e:d+m}}i+=g[D]&&!l&&a[D]!==!1&&(g[K]||c[D]||a[D]||a[E])?g[D]:e,delete a[D];var o={};a[B]&&(o=JSON.parse(JSON.stringify(a[B])),delete a[B]);var p=e;a[C]&&(p=a[C],delete a[C]);var q="/:";return!f[h+t]||a[f[h+t]]||c[t]!==!1&&a[I]!==!1&&c[I]!==!1||(i=i.replace(q+f[h+t],e)),Object.keys(c).forEach(function(b){if(c[b]===!1&&!a[b])return i=i.replace(q+b,e)}),Object.keys(a).forEach(function(b){i=a[b]===!1?i.replace(q+b,e):i.replace(":"+b,a[b])}),Object.keys(o).forEach(function(a,b,c){0===b&&(i+="?"),Array.isArray(o[a])?o[a].forEach(function(d,e){return i+=encodeURIComponent(a)+"[]="+encodeURIComponent(d)+(o[a].length-1!==e||c.length-1!==b?"&":"")}):i+=encodeURIComponent(a)+"="+encodeURIComponent(o[a])+(c.length-1!==b?"&":"")}),p&&(i+="#"+encodeURIComponent(p)),i}}]),a}(),W=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,$=new WeakMap,_=new WeakMap,aa=new WeakMap,ba=function(a){function b(){var a;_classCallCheck(this,b);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return _possibleConstructorReturn(this,(a=_getPrototypeOf(b)).call.apply(a,[this].concat(d)))}return _inherits(b,a),_createClass(b,[{key:"path",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _get(_getPrototypeOf(b.prototype),"path",this).call(this,a,function(b){var c=e,f=d+":"+b[t],g=b.parent||{};b.root;if(b[t]&&a[H])c+=f;else{var h=!!b[t]&&a[b[t]]!==!1;c+="Trocha"===g.constructor.name?e:d,c+=a[w]?e:b[A],c+=h?f:e}return c})}}],[{key:"diggestAlias",value:function(a,b,c){var d={};return d[b+y]=s,d[b+A]=a[c+A]||a,d[b+F]=a[c+F],d[b+t]=a[c+t],d}},{key:"isAlias",value:function(a,b){return"string"==typeof a||a[b+y]===s&&a[b+A]}}]),b}(V),ca=function(a){function b(){var a;_classCallCheck(this,b);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return _possibleConstructorReturn(this,(a=_getPrototypeOf(b)).call.apply(a,[this].concat(d)))}return _inherits(b,a),_createClass(b,[{key:"path",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;return _get(_getPrototypeOf(b.prototype),"path",this).call(this,a,function(a){return"function"==typeof d&&d()!==!0&&c(void 0,U),!1})}}],[{key:"diggestResource",value:function(a,b,c){var d={};return d[b+y]=r,d[b+u]=a[c+u]||R(b),d[b+F]=a[c+F],d[b+t]=a[c+t],d}},{key:"isResource",value:function(a,b){return a[b+y]===r&&a[b+t]}}]),b}(V),da=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,b),_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,null,null,a.customSelector,null,a.routes,a.domain,a.alwaysUrl,a.pre,a.post,a.alwaysPost))}return _inherits(b,a),_createClass(b,null,[{key:"ROUTE",get:function(){return p}},{key:"SCOPE",get:function(){return q}},{key:"RESOURCE",get:function(){return r}},{key:"ALIAS",get:function(){return s}},{key:"OPTIONS",get:function(){return g}},{key:"GET",get:function(){return h}},{key:"HEAD",get:function(){return i}},{key:"POST",get:function(){return j}},{key:"PUT",get:function(){return k}},{key:"PATCH",get:function(){return l}},{key:"DELETE",get:function(){return m}},{key:"TRACE",get:function(){return n}},{key:"CONNECT",get:function(){return o}},{key:"$RESOURCE",get:function(){return R()}}]),b}(V);self.Trocha=da,a.Trocha=da}(this);