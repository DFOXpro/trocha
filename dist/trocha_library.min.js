/** @license TrochaJS@0.2.0 - 2019-03-16
* Trocha.js 
* 
* This source code is licensed under the Mozillas Public license 2.0 found in the 
* LICENSE file in the root directory of this source tree. 
*/
function _get(a,b,c){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,b,c){var d=_superPropBase(a,b);if(d){var e=Object.getOwnPropertyDescriptor(d,b);return e.get?e.get.call(c):e.value}})(a,b,c||a)}function _superPropBase(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=_getPrototypeOf(a),null!==a););return a}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperties(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classPrivateFieldGet(a,b){if(!b.has(a))throw new TypeError("attempted to get private field on non-instance");var c=b.get(a);return c.get?c.get.call(a):c.value}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){return!b||"object"!==_typeof(b)&&"function"!=typeof b?_assertThisInitialized(a):b}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _wrapNativeSuper(a){var b="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(a){function c(){return _construct(a,arguments,_getPrototypeOf(this).constructor)}if(null===a||!_isNativeFunction(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(c,a)})(a)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function _construct(a,b,c){return _construct=isNativeReflectConstruct()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);var e=Function.bind.apply(a,d),f=new e;return c&&_setPrototypeOf(f,c.prototype),f},_construct.apply(null,arguments)}function _isNativeFunction(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function _setPrototypeOf(a,b){return(_setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function _getPrototypeOf(a){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}!function(a){var b=function(a,b,c){var d=function(a){function b(a,c,d){var e;return _classCallCheck(this,b),e=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,T+c)),e.scope=a,e.value=d,e}return _inherits(b,a),b}(_wrapNativeSuper(Error));throw new d(a,b,c)},c=function(a,b,c){},d="/",e="",f="$",g="OPTIONS",h="GET",i="HEAD",j="POST",k="PUT",l="PATCH",m="DELETE",n="TRACE",o="CONNECT",p="ROUTE",q="SCOPE",r="RESOURCE",s="ALIAS",t="id",u="url",v="name",w="hide",x="type",y="pre",z="alias",A="query",B="post",C="ext",D="method",E="domain",F="justId",G="fragment",H="resource",I="parentId",J="defaultId",K="alwaysUrl",L="alwaysPost",M="as",N="path",O="show",P="edit",Q="new",R="list",S=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,b={};return b[a+t]=t,b[O]={},b[P]={},b[Q]={},b[R]={},b[O][a+w]=!0,b[Q][a+t]=!1,b[R][a+t]=!1,b[R][a+w]=!0,b},T="TrochaJS error: ",U="Route already declare",V="Scope is not printable a route",W="Resource should not be used as a route",X="Attribute not supported, skiped",Y=function(){function a(c,d,e,g){var h=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},j=arguments.length>5?arguments[5]:void 0,k=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,m=arguments.length>8?arguments[8]:void 0,n=arguments.length>9?arguments[9]:void 0;_classCallCheck(this,a),Z.set(this,{writable:!0,value:{parent:null,childs:{},SS:f,alwaysPost:!1,alwaysUrl:!1,domain:"",post:"",pre:""}}),$.set(this,{writable:!0,value:function(a,b){var c=_classPrivateFieldGet(a,Z).SS;return!!_classPrivateFieldGet(a,Z).parent&&(_classPrivateFieldGet(a,Z).parent[c+t]===b||_classPrivateFieldGet(a,$).call(a,_classPrivateFieldGet(a,Z).parent,b))}}),_.set(this,{writable:!0,value:function(a,b,c,d){var e=d?"":_classPrivateFieldGet(a,Z).SS;Object.defineProperty(a,e+b,{get:function(){return c?c():_classPrivateFieldGet(a,Z)[b]},enumerable:!0,configurable:!1})}}),aa.set(this,{writable:!0,value:function(a,b){var c=_classPrivateFieldGet(a,Z).SS,d=function(d){_classPrivateFieldGet(a,Z)[d]=b[c+d],delete b[c+d]};d(v),d(t),d(J),d(x),d(D),d(z),d(H),d(w),d(B),d(F),d(I),!1===b[_classPrivateFieldGet(a,Z).parent[c+t]]&&d(_classPrivateFieldGet(a,Z).parent[c+t]),_classPrivateFieldGet(a,_).call(a,a,v),_classPrivateFieldGet(a,_).call(a,a,t),_classPrivateFieldGet(a,_).call(a,a,D),_classPrivateFieldGet(a,_).call(a,a,M,function(){return _classPrivateFieldGet(a,da).call(a,a)})}}),ba.set(this,{writable:!0,value:function(c,d,e){var f=_classPrivateFieldGet(c,Z).SS;_classPrivateFieldGet(c,Z).childs[e]&&b(c,U,e);var g=[a,ea,fa,ga];g.forEach(function(a){a.is(d,f)&&(d=a.diggest(d,f,f))}),d[f+v]=e;var h={};h[p]=a,h[void 0]=a,h[s]=ea,h[q]=ga,h[r]=fa;var i=new h[d[f+x]](c,d,f,_classPrivateFieldGet(c,Z).root);_classPrivateFieldGet(c,Z).childs[e]=i,_classPrivateFieldGet(c,_).call(c,c,e,function(){return _classPrivateFieldGet(c,Z).childs[e]},!0)}}),ca.set(this,{writable:!0,value:function(a,b,c){var d=_classPrivateFieldGet(a,Z).SS;if(!c&&_classPrivateFieldGet(a,Z)[x]===r){var e=_classPrivateFieldGet(a,Z)[H];delete e[d+t],_classPrivateFieldGet(a,ca).call(a,a,e,!0)}for(var f=Object.keys(b);f.length;){var g=f.pop();if(b[g]===!1&&_classPrivateFieldGet(a,$).call(a,a,g))_classPrivateFieldGet(a,Z)[g]=!1;else if(_classPrivateFieldGet(a,ba).call(a,a,b[g],g),_classPrivateFieldGet(a,Z)[x]===q){var h=_objectSpread({},b[g]);h[d+I]=!1,_classPrivateFieldGet(a,ba).call(a,_classPrivateFieldGet(a,Z).parent,h,g)}}}}),da.set(this,{writable:!0,value:function(a){var b=_classPrivateFieldGet(a,Z).SS;return _classPrivateFieldGet(a,Z).parent[b+M]?"".concat(_classPrivateFieldGet(a,Z).parent[b+M],"_").concat(_classPrivateFieldGet(a,Z)[v]):_classPrivateFieldGet(a,Z)[v]}}),_defineProperty(this,"_newRoute",function(b){return b[x]=p,!!a.is(b,"")&&void _classPrivateFieldGet(h,ba).call(h,h,a.diggest(b,_classPrivateFieldGet(h,Z).SS,""),b[v])}),_defineProperty(this,"_newScope",function(a){return a[x]=q,!!ga.is(a,"")&&void _classPrivateFieldGet(h,ba).call(h,h,ga.diggest(a,_classPrivateFieldGet(h,Z).SS,""),a[v])}),_defineProperty(this,"_newAlias",function(a){return a[x]=s,!!ea.is(a,"")&&void _classPrivateFieldGet(h,ba).call(h,h,ea.diggest(a,_classPrivateFieldGet(h,Z).SS,""),a[v])}),_defineProperty(this,"_newResource",function(a){return a[x]=r,!!fa.is(a,"")&&void _classPrivateFieldGet(h,ba).call(h,h,fa.diggest(a,_classPrivateFieldGet(h,Z).SS,""),a[v])}),_defineProperty(this,"toString",function(){return _classPrivateFieldGet(h,da).call(h,h)});var o=_classPrivateFieldGet(this,Z).SS=e||f;c||d&&d[o+v]&&d[o+x]?(_classPrivateFieldGet(this,Z).parent=c,_classPrivateFieldGet(this,Z).root=g,_classPrivateFieldGet(this,aa).call(this,this,d),_classPrivateFieldGet(this,ca).call(this,this,d)):(_classPrivateFieldGet(this,Z)[E]=j||_classPrivateFieldGet(this,Z)[E],_classPrivateFieldGet(this,_).call(this,this,E),_classPrivateFieldGet(this,Z)[K]=k||_classPrivateFieldGet(this,Z)[K],_classPrivateFieldGet(this,Z)[L]=n||_classPrivateFieldGet(this,Z)[L],_classPrivateFieldGet(this,Z)[B]=m||_classPrivateFieldGet(this,Z)[B],_classPrivateFieldGet(this,Z)[y]=l||_classPrivateFieldGet(this,Z)[y],_classPrivateFieldGet(this,Z).root=_classPrivateFieldGet(this,Z),delete this[N],_classPrivateFieldGet(this,_).call(this,this,r,function(){return S(o)}),_classPrivateFieldGet(this,ca).call(this,this,i))}return _createClass(a,[{key:"path",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1?arguments[1]:void 0,c=_classPrivateFieldGet(this,Z),f=c.parent||{},g=c.root,h=c.SS,i=e;if(void 0===c[v])return"";i=g[E]&&a[u]!==!1&&(a[u]||g[K])?g[E]:e,delete a[u],i+=g[y]&&(a[y]||a[C])?g[y]:e,delete a[y];var j={};j[B]=!1,i+=f[N]?f[N](j,function(){return!0}):e;var k,l=void 0!==a[w]?a[w]:c[w]||c[F]&&c[J]===!1;if("function"==typeof b&&(k=b(c)),"string"==typeof k)i+=k;else{var m=":"+c[t];if(a[F]!==!1&&c[F]&&c[t]&&c[c[t]]!==!1)i+=d+m;else{var n=!c[t]||a[t]===!1;i+=l?e:d+c[v],i+=n?e:d+m}}i+=g[B]&&!l&&a[B]!==!1&&(g[L]||c[B]||a[B]||a[C])?g[B]:e,delete a[B];var o={};a[A]&&(o=JSON.parse(JSON.stringify(a[A])),delete a[A]);var p=e;a[G]&&(p=a[G],delete a[G]);var q="/:";return!f[h+t]||a[f[h+t]]||c[t]!==!1&&a[I]!==!1&&c[I]!==!1||(i=i.replace(q+f[h+t],e)),Object.keys(c).forEach(function(b){if(c[b]===!1&&!a[b])return i=i.replace(q+b,e)}),Object.keys(a).forEach(function(b){i=a[b]===!1?i.replace(q+b,e):i.replace(":"+b,a[b])}),Object.keys(o).forEach(function(a,b,c){0===b&&(i+="?"),Array.isArray(o[a])?o[a].forEach(function(d,e){return i+=encodeURIComponent(a)+"[]="+encodeURIComponent(d)+(o[a].length-1!==e||c.length-1!==b?"&":"")}):i+=encodeURIComponent(a)+"="+encodeURIComponent(o[a])+(c.length-1!==b?"&":"")}),p&&(i+="#"+encodeURIComponent(p)),i}}],[{key:"is",value:function(a,b){return a[b+x]===p||"object"===_typeof(a)&&void 0===a[b+x]}}]),a}(),Z=new WeakMap,$=new WeakMap,_=new WeakMap,aa=new WeakMap,ba=new WeakMap,ca=new WeakMap,da=new WeakMap;_defineProperty(Y,"DEFAULT_METHOD",h),_defineProperty(Y,"diggest",function(a,b,c,d,e){if(!d||!e){var f={};return f[b+x]=p,f[b+D]=a[c+D]||Y.DEFAULT_METHOD,Y.diggest(a,b,c,f,[t,w,F,B,I]),Y._trimSelector(c,a,f),f}e.forEach(function(e){d[b+e]=a[c+e]})}),_defineProperty(Y,"_trimSelector",function(a,b,d){Object.keys(b).forEach(function(e){e.slice(0,2)!==a?d[e]=b[e]:c(Y,X,e)})});var ea=function(a){function b(){var a;_classCallCheck(this,b);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return _possibleConstructorReturn(this,(a=_getPrototypeOf(b)).call.apply(a,[this].concat(d)))}return _inherits(b,a),_createClass(b,[{key:"path",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _get(_getPrototypeOf(b.prototype),"path",this).call(this,a,function(b){var c=e,f=d+":"+b[t],g=b.parent||{};b.root;if(b[t]&&a[F])c+=f;else{var h=!!b[t]&&a[b[t]]!==!1;c+="Trocha"===g.constructor.name?e:d,c+=a[w]?e:b[z],c+=h?f:e}return c})}}],[{key:"diggest",value:function(a,b,c){var d={};return d[b+x]=s,d[b+z]=a[c+z]||a,d[b+D]=a[c+D]||Y.DEFAULT_METHOD,Y.diggest(a,b,c,d,[t,B,I]),"string"!=typeof a&&Y._trimSelector(c,a,d),d}},{key:"is",value:function(a,b){return"string"==typeof a||a[b+x]===s&&a[b+z]}}]),b}(Y),fa=function(a){function b(){var a;_classCallCheck(this,b);for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return _possibleConstructorReturn(this,(a=_getPrototypeOf(b)).call.apply(a,[this].concat(d)))}return _inherits(b,a),_createClass(b,[{key:"path",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;return _get(_getPrototypeOf(b.prototype),"path",this).call(this,a,function(a){return"function"==typeof d&&d()!==!0&&c(void 0,W),!1})}}],[{key:"diggest",value:function(a,b,c){var d={};return d[b+x]=r,d[b+H]=a[c+H]||S(b),Y.diggest(a,b,c,d,[t]),Y._trimSelector(c,a,d),d}},{key:"is",value:function(a,b){return a[b+x]===r&&a[b+t]}}]),b}(Y),ga=function(a){function c(){var a;_classCallCheck(this,c);for(var b=arguments.length,d=new Array(b),e=0;e<b;e++)d[e]=arguments[e];return _possibleConstructorReturn(this,(a=_getPrototypeOf(c)).call.apply(a,[this].concat(d)))}return _inherits(c,a),_createClass(c,[{key:"path",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;return _get(_getPrototypeOf(c.prototype),"path",this).call(this,a,function(a){return"function"==typeof d&&d()!==!0&&b(void 0,V),!1})}}],[{key:"diggest",value:function(a,b,c){var d={};return d[b+x]=q,d[b+F]=!0,d[b+J]=a[c+J]||!1,Y.diggest(a,b,c,d,[t,w]),Y._trimSelector(c,a,d),d}},{key:"is",value:function(a,b){return"object"===_typeof(a)&&a[b+x]===q&&a[b+t]}}]),c}(Y),ha=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,b),_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,null,null,a.customSelector,null,a.routes,a.domain,a.alwaysUrl,a.pre,a.post,a.alwaysPost))}return _inherits(b,a),_createClass(b,null,[{key:"ROUTE",get:function(){return p}},{key:"SCOPE",get:function(){return q}},{key:"RESOURCE",get:function(){return r}},{key:"ALIAS",get:function(){return s}},{key:"OPTIONS",get:function(){return g}},{key:"GET",get:function(){return h}},{key:"HEAD",get:function(){return i}},{key:"POST",get:function(){return j}},{key:"PUT",get:function(){return k}},{key:"PATCH",get:function(){return l}},{key:"DELETE",get:function(){return m}},{key:"TRACE",get:function(){return n}},{key:"CONNECT",get:function(){return o}},{key:"$RESOURCE",get:function(){return S()}}]),b}(Y);self.Trocha=ha,a.Trocha=ha}(this);