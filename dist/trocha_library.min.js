/** @license TrochaJS@0.2.0 - 2019-03-13
* Trocha.js 
* 
* This source code is licensed under the Mozillas Public license 2.0 found in the 
* LICENSE file in the root directory of this source tree. 
*/
"use strict";function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function _defineProperties(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classPrivateFieldGet(a,b){if(!b.has(a))throw new TypeError("attempted to get private field on non-instance");var c=b.get(a);return c.get?c.get.call(a):c.value}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){return!b||"object"!==_typeof(b)&&"function"!=typeof b?_assertThisInitialized(a):b}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _wrapNativeSuper(a){var b="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(a){function c(){return _construct(a,arguments,_getPrototypeOf(this).constructor)}if(null===a||!_isNativeFunction(a))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof b){if(b.has(a))return b.get(a);b.set(a,c)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(c,a)})(a)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function _construct(a,b,c){return _construct=isNativeReflectConstruct()?Reflect.construct:function(a,b,c){var d=[null];d.push.apply(d,b);var e=Function.bind.apply(a,d),f=new e;return c&&_setPrototypeOf(f,c.prototype),f},_construct.apply(null,arguments)}function _isNativeFunction(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function _setPrototypeOf(a,b){return(_setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function _getPrototypeOf(a){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}!function(a){var b=function(a,b,c){var d=function(a){function b(a,c,d){var e;return _classCallCheck(this,b),e=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,R+c)),e.scope=a,e.value=d,e}return _inherits(b,a),b}(_wrapNativeSuper(Error));throw new d(a,b,c)},c="/",d="",e="$",f="OPTIONS",g="GET",h="HEAD",i="POST",j="PUT",k="PATCH",l="DELETE",m="TRACE",n="CONNECT",o="ROUTE",p="SCOPE",q="RESOURCE",r="ALIAS",s="id",t="resource",u="name",v="hide",w="url",x="type",y="pre",z="alias",A="query",B="fragment",C="post",D="ext",E="method",F="domain",G="justId",H="parentId",I="alwaysUrl",J="alwaysPost",K="as",L="path",M="show",N="edit",O="new",P="list",Q=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,b={};return b[a+s]=s,b[M]={},b[N]={},b[O]={},b[P]={},b[M][a+v]=!0,b[O][a+s]=!1,b[P][a+s]=!1,b[P][a+v]=!0,b},R="TrochaJS error: ",S="route already declare",T=function a(f,h,i,j){var k=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},m=arguments.length>5?arguments[5]:void 0,n=arguments.length>6?arguments[6]:void 0,M=arguments.length>7?arguments[7]:void 0,N=arguments.length>8?arguments[8]:void 0,O=arguments.length>9?arguments[9]:void 0;_classCallCheck(this,a),U.set(this,{writable:!0,value:{parent:null,childs:{},SS:e,alwaysPost:!1,alwaysUrl:!1,domain:"",post:"",pre:""}}),V.set(this,{writable:!0,value:function(a,b){var c=_classPrivateFieldGet(a,U).SS;return!!_classPrivateFieldGet(a,U).parent&&(_classPrivateFieldGet(a,U).parent[c+s]===b||_classPrivateFieldGet(a,V).call(a,_classPrivateFieldGet(a,U).parent,b))}}),W.set(this,{writable:!0,value:function(a,b,c,d){var e=d?"":_classPrivateFieldGet(a,U).SS;Object.defineProperty(a,e+b,{get:function(){return c?c():_classPrivateFieldGet(a,U)[b]},enumerable:!0,configurable:!1})}}),X.set(this,{writable:!0,value:function(a,b){var c=_classPrivateFieldGet(a,U).SS,d=function(d){_classPrivateFieldGet(a,U)[d]=b[c+d],delete b[c+d]};d(u),d(z),d(s),d(E),d(z),d(x),d(v),d(G),d(H),!1===b[_classPrivateFieldGet(a,U).parent[c+s]]&&d(_classPrivateFieldGet(a,U).parent[c+s]),_classPrivateFieldGet(a,W).call(a,a,u),_classPrivateFieldGet(a,W).call(a,a,s),_classPrivateFieldGet(a,W).call(a,a,E),_classPrivateFieldGet(a,W).call(a,a,K,function(){return _classPrivateFieldGet(a,$).call(a,a)})}}),Y.set(this,{writable:!0,value:function(c,d,e){if(_classPrivateFieldGet(c,U).childs[e]&&b(c,S,e),"string"==typeof d){var f=d;d={},d[_classPrivateFieldGet(c,U).SS+z]=f}d[_classPrivateFieldGet(c,U).SS+u]=e;var g=new a(c,d,_classPrivateFieldGet(c,U).SS,_classPrivateFieldGet(c,U).root);_classPrivateFieldGet(c,U).childs[e]=g,_classPrivateFieldGet(c,W).call(c,c,e,function(){return _classPrivateFieldGet(c,U).childs[e]},!0)}}),Z.set(this,{writable:!0,value:function(a,b,c){if(!c&&_classPrivateFieldGet(a,U)[x]===q){var d=_classPrivateFieldGet(a,U).SS,e=b[d+t]||Q(d);delete e[d+s],_classPrivateFieldGet(a,Z).call(a,a,e,!0),delete b[d+t]}for(var f=Object.keys(b);f.length;){var g=f.pop();b[g]===!1&&_classPrivateFieldGet(a,V).call(a,a,g)?_classPrivateFieldGet(a,U)[g]=!1:_classPrivateFieldGet(a,Y).call(a,a,b[g],g)}}}),$.set(this,{writable:!0,value:function(a){var b=_classPrivateFieldGet(a,U).SS;return _classPrivateFieldGet(a,U).parent[b+K]?"".concat(_classPrivateFieldGet(a,U).parent[b+K],"_").concat(_classPrivateFieldGet(a,U)[u]):_classPrivateFieldGet(a,U)[u]}}),_defineProperty(this,"_newRoute",function(a){var b=_classPrivateFieldGet(k,U).SS,c={};c[b+x]=o,c[b+E]=a[E],c[b+s]=a[s],c[b+v]=a[v],c[b+G]=a[G],_classPrivateFieldGet(k,Y).call(k,k,c,a[u])}),_defineProperty(this,"_newScope",function(a){var b=_classPrivateFieldGet(k,U).SS,c={};c[b+x]=p,c[b+s]=a[s],_classPrivateFieldGet(k,Y).call(k,k,c,a[u])}),_defineProperty(this,"_newAlias",function(a){var b=_classPrivateFieldGet(k,U).SS,c={};c[b+z]=a[z],c[b+x]=r,c[b+E]=a[E],_classPrivateFieldGet(k,Y).call(k,k,c,a[u])}),_defineProperty(this,"_newResource",function(a){var b=_classPrivateFieldGet(k,U).SS,c={};c[b+t]=a[t],c[b+x]=q,c[b+s]=a[s],_classPrivateFieldGet(k,Y).call(k,k,c,a[u])}),_defineProperty(this,"path",function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=_classPrivateFieldGet(k,U),e=b.parent||{},f=b.root,g=b.SS,h=d;if(void 0===b[u])return"";if(b[z])return b[z];h=f[F]&&!e[L]&&a[w]!==!1&&(a[w]||f[g+alwaysUrl])?f[F]:d,delete a[w],h+=f[y]&&(a[y]||a[D])?f[y]:d,delete a[y];var i={};i[C]=!1,h+=e[L]?e[L](i):d;var j=":"+b[s],l=void 0!==a[v]?a[v]:b[v];if(a[G]!==!1&&b[G]&&b[s])h+=c+j;else{var m=!b[s]||a[s]===!1;h+=l?d:c+b[u],h+=m?d:c+j}h+=f[C]&&!l&&a[C]!==!1&&(f[J]||b[C]||a[C]||a[D])?f[C]:d,delete a[C];var n={};a[A]&&(n=JSON.parse(JSON.stringify(a[A])),delete a[A]);var o=d;a[B]&&(o=a[B],delete a[B]);var p="/:";return!e[g+s]||a[e[g+s]]||b[s]!==!1&&a[H]!==!1&&b[H]!==!1||(h=h.replace(p+e[g+s],d)),Object.keys(b).forEach(function(c){if(b[c]===!1&&!a[c])return h=h.replace(p+c,d)}),Object.keys(a).forEach(function(b){h=a[b]===!1?h.replace(p+b,d):h.replace(":"+b,a[b])}),Object.keys(n).forEach(function(a,b,c){0===b&&(h+="?"),h+=encodeURIComponent(a)+"="+encodeURIComponent(n[a])+(c.length-1!==b?"&":"")}),o&&(h+="#"+encodeURIComponent(o)),h}),_defineProperty(this,"toString",function(){return _classPrivateFieldGet(k,$).call(k,k)});var P=_classPrivateFieldGet(this,U).SS=i||e,R={};R[P+E]=g,R[P+x]=o;var T=_objectSpread({},R,h);f||T[P+u]&&T[P+E]&&T[P+x]?(_classPrivateFieldGet(this,U).parent=f,_classPrivateFieldGet(this,U).root=j,_classPrivateFieldGet(this,X).call(this,this,T),_classPrivateFieldGet(this,Z).call(this,this,T)):(_classPrivateFieldGet(this,U)[F]=m||_classPrivateFieldGet(this,U)[F],_classPrivateFieldGet(this,W).call(this,this,F),_classPrivateFieldGet(this,U)[I]=n||_classPrivateFieldGet(this,U)[I],_classPrivateFieldGet(this,U)[J]=O||_classPrivateFieldGet(this,U)[J],_classPrivateFieldGet(this,U)[C]=N||_classPrivateFieldGet(this,U)[C],_classPrivateFieldGet(this,U)[y]=M||_classPrivateFieldGet(this,U)[y],_classPrivateFieldGet(this,U).root=_classPrivateFieldGet(this,U),_classPrivateFieldGet(this,W).call(this,this,q,function(){return Q(P)}),_classPrivateFieldGet(this,Z).call(this,this,l))},U=new WeakMap,V=new WeakMap,W=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,$=new WeakMap,_=function(a){function b(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,b),_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,null,null,a.customSelector,null,a.routes,a.domain,a.alwaysUrl,a.pre,a.post,a.alwaysPost))}return _inherits(b,a),_createClass(b,null,[{key:"ROUTE",get:function(){return o}},{key:"SCOPE",get:function(){return p}},{key:"RESOURCE",get:function(){return q}},{key:"ALIAS",get:function(){return r}},{key:"OPTIONS",get:function(){return f}},{key:"GET",get:function(){return g}},{key:"HEAD",get:function(){return h}},{key:"POST",get:function(){return i}},{key:"PUT",get:function(){return j}},{key:"PATCH",get:function(){return k}},{key:"DELETE",get:function(){return l}},{key:"TRACE",get:function(){return m}},{key:"CONNECT",get:function(){return n}},{key:"$RESOURCE",get:function(){return Q()}}]),b}(T);self.Trocha=_,a.Trocha=_}(void 0);